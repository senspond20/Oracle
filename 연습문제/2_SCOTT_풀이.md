# SCOTT_연습문제
--

```sql
--SCOTT_연습문제
--1. EMP테이블에서 COMM 의 값이 NULL이 아닌 정보 조회
SELECT * FROM EMP WHERE COMM IS NOT NULL;

--2. EMP테이블에서 커미션을 받지 못하는 직원 조회
SELECT * FROM EMP WHERE (COMM IS NULL) OR (COMM = 0);

--3. EMP테이블에서 관리자가 없는 직원 정보 조회
SELECT * FROM EMP WHERE MGR IS NULL;

--4. EMP테이블에서 급여를 많이 받는 직원 순으로 조회
SELECT * FROM EMP ORDER BY SAL DESC;

--5. EMP테이블에서 급여가 같을 경우 커미션을 내림차순 정렬 조회
SELECT * FROM EMP 
ORDER BY SAL DESC, COMM DESC;

--6. EMP테이블에서 사원번호, 사원명, 직급, 입사일 조회 (단, 입사일을 오름차순 정렬 처리)
SELECT EMPNO, ENAME, JOB, HIREDATE
FROM EMP
ORDER BY HIREDATE ASC;

--7. EMP테이블에서 사원번호, 사원명 조회 (사원번호 기준 내림차순 정렬)
SELECT EMPNO, ENAME
FROM EMP
ORDER BY EMPNO DESC;

--8. EMP테이블에서 사번, 입사일, 사원명, 급여 조회 
--  (부서번호가 빠른 순으로, 같은 부서번호일 때는 최근 입사일 순으로 처리)

SELECT EMPNO, HIREDATE, ENAME, SAL
FROM EMP
ORDER BY DEPTNO, HIREDATE DESC;

--9. 오늘 날짜에 대한 정보 조회
SELECT SYSDATE FROM DUAL;

--10. EMP테이블에서 사번, 사원명, 급여 조회 
--   (단, 급여는 100단위까지의 값만 출력 처리하고 급여 기준 내림차순 정렬)

--SELECT TRUNC(123) FROM DUAL; -- 123
--SELECT TRUNC(123.456,-2) FROM DUAL; -- 100
--SELECT TRUNC(123.456,-1) FROM DUAL; -- 120
--SELECT TRUNC(123.456) FROM DUAL; --123
--SELECT TRUNC(123.456,1) FROM DUAL; --123.4
--SELECT TRUNC(123.456,2) FROM DUAL; --123.45

SELECT EMPNO, ENAME, SAL, TRUNC(SAL,-2) -- 100 아래자릿수는 걍 버린다.
FROM EMP
ORDER BY SAL DESC;

--11. EMP테이블에서 사원번호가 홀수인 사원들을 조회
SELECT * FROM EMP
WHERE MOD(EMPNO,2) = 1;

--12. EMP테이블에서 사원명, 입사일 조회 (단, 입사일은 년도와 월을 분리 추출해서 출력)
SELECT ENAME 사원명,
       EXTRACT(YEAR FROM HIREDATE), EXTRACT(MONTH FROM HIREDATE)
FROM EMP;

--
--SELECT ENAME 사원명,
--       SUBSTR(HIREDATE,1,2)|| '년' || SUBSTR(HIREDATE,3,2) ||'월' AS "입사일(년/월)"
--FROM EMP;

--13. EMP테이블에서 9월에 입사한 직원의 정보 조회
SELECT * FROM EMP
WHERE EXTRACT(MONTH FROM HIREDATE) = 9;

--14. EMP테이블에서 81년도에 입사한 직원 조회
--1)
SELECT * FROM EMP
WHERE EXTRACT(YEAR FROM HIREDATE) = 1981;

--2)
SELECT * FROM EMP
WHERE SUBSTR(EXTRACT(YEAR FROM HIREDATE),3,2) = '81';

--15. EMP테이블에서 이름이 'E'로 끝나는 직원 조회

-- 1)
SELECT * FROM EMP
WHERE ENAME LIKE ('%E');
-- 7698	BLAKE	MANAGER	7839	81/04/01	2850		30

-- 2) 
SELECT * FROM EMP
WHERE INSTR((ENAME || '#'),'#',-1) - INSTR(ENAME,'E',-1) = 1;
-- 7698	BLAKE	MANAGER	7839	81/04/01	2850		30

-- SELECT ENAME, INSTR((ENAME || '#'),'#',-1) FROM EMP; -- 임의의 '#'을 끝에 집어넣어서 ( 이름의 총길이 + 1 ) 수  계산
-- SELECT ENAME, INSTR(ENAME,'E',-1) FROM EMP; -- 이름의 끝부터 문자'E'나오는 숫자
-- 이름의 총길이 + 1 - 이름의 끝부터 문자'E'나오는 숫자 = 1 인경우 문자 끝에 'E'가 있으므로


--16. EMP테이블에서 이름의 세 번째 글자가 'R'인 직원의 정보 조회
--	16-1. LIKE 사용
SELECT * FROM EMP
WHERE ENAME LIKE('__R%');

--	16-2. SUBSTR() 함수 사용
SELECT * FROM EMP
WHERE SUBSTR(ENAME,3,1) = 'R';
-- 
--
--17. EMP테이블에서 사번, 사원명, 입사일, 입사일로부터 40년 되는 날짜 조회
-- 1)
SELECT EMPNO, ENAME, HIREDATE, ADD_MONTHS(HIREDATE,40 * 12) 
FROM EMP;

-- ADD_MONTHS : 날짜에 숫자만큼의 개월 수를 더해 날짜 리턴
-- 40년이면 40 * 12달.


--18. EMP테이블에서 입사일로부터 38년 이상 근무한 직원의 정보 조회
--1) 원초적인 방식으로...
SELECT * FROM EMP
WHERE EXTRACT(YEAR FROM SYSDATE) - EXTRACT(YEAR FROM HIREDATE) > 38 OR 
       -- 딱 38년째이면 월과 일까지 따짐
      EXTRACT(YEAR FROM SYSDATE) - EXTRACT(YEAR FROM HIREDATE) = 38 AND
    ( EXTRACT(MONTH FROM SYSDATE) - EXTRACT(MONTH FROM HIREDATE) > 0  OR
    ( EXTRACT(MONTH FROM SYSDATE) - EXTRACT(MONTH FROM HIREDATE) = 0 AND
      EXTRACT(DAY FROM SYSDATE) - EXTRACT(DAY FROM HIREDATE) > 0 ) );
      
--7369	SMITH	CLERK	7902	80/12/17	800		20
--7499	ALLEN	SALESMAN7698	81/02/20	1600	300	30
--7521	WARD	SALESMAN7698	81/02/22	1250	200	30
--7566	JONES	MANAGER	7839	81/04/02	2975	30	20
--7654	MARTIN	SALESMAN7698	81/09/28	1250	300	30
--7698	BLAKE	MANAGER	7839	81/04/01	2850		30
--7782	CLARK	MANAGER	7839	81/06/01	2450		10
--7839	KING	PRESIDENT		81/11/17	5000	350010
--7844	TURNER	SALESMAN7698	81/09/08	1500	0	30
--7900	JAMES	CLERK	7698	81/10/03	950		30
--7902	FORD	ANALYST	7566	81/10/03	3000		20
--7934	MILLER	CLERK	7782	82/01/23	1300		10

--2)
-- SELECT HIREDATE,ADD_MONTHS(HIREDATE, 38 * 12) FROM EMP;
-- ADD_MONTHS를 활용해 38년(38달 * 12)을 더해 계산한 날짜를
-- 현재날짜에서 빼서 0보다 크면 38년이상 근무

SELECT * FROM EMP
WHERE SYSDATE - ADD_MONTHS(HIREDATE, 38 * 12) > 0;
--7369	SMITH	CLERK	7902	80/12/17	800		20
--7499	ALLEN	SALESMAN7698	81/02/20	1600	300	30
--7521	WARD	SALESMAN7698	81/02/22	1250	200	30
--7566	JONES	MANAGER	7839	81/04/02	2975	30	20
--7654	MARTIN	SALESMAN7698	81/09/28	1250	300	30
--7698	BLAKE	MANAGER	7839	81/04/01	2850		30
--7782	CLARK	MANAGER	7839	81/06/01	2450		10
--7839	KING	PRESIDENT   	81/11/17	5000	350010
--7844	TURNER	SALESMAN7698	81/09/08	1500	0	30
--7900	JAMES	CLERK	7698	81/10/03	950		30
--7902	FORD	ANALYST	7566	81/10/03	3000		20
--7934	MILLER	CLERK	7782	82/01/23	1300		10

--19. 오늘 날짜에서 년도만 추출
--1)
SELECT EXTRACT(YEAR FROM SYSDATE) 년도 FROM DUAL;
--RESULT : 2020

--2)
SELECT TO_CHAR(SYSDATE,'YYYY') 년도 FROM DUAL;
--RESULT : 2020

-- 년도가 뒤의 두자리수만 나온다.
SELECT SUBSTR(SYSDATE,1,2) 년도 FROM DUAL;
--RESULT : 20

```